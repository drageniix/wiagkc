{"version":3,"sources":["webpack:///./src/redux/selectors/common.js","webpack:///./src/redux/actions/events.js","webpack:///./src/components/Modals/EventForm.jsx"],"names":["getErrors","errors","data","reduce","prev","curr","_objectSpread","_defineProperty","param","msg","setEvent","event","type","getEvents","dispatch","fetch","then","res","json","events","catch","err","setErrors","addEvent","getState","body","JSON","stringify","method","headers","Content-Type","Authorization","user","token","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","next","sent","status","setModal","stop","this","_x","apply","arguments","updateEvent","_id","_ref2","_callee2","_context2","_x2","deleteEvent","_ref3","_callee3","_context3","_x3","AddEvent","_React$Component","props","_this","_classCallCheck","_getPrototypeOf","call","_assertThisInitialized","e","preventDefault","parsedDate","date","state","title","details","emphasis","Date","now","_inherits","React","Component","key","value","_this2","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","checked","onChange","setState","target","name","react_flatpickr__WEBPACK_IMPORTED_MODULE_3___default","data-enable-time","options","altInput","altFormat","getTime","placeholder","onClick","onSumbit","mapDispatchToProps","propTypes","PropTypes","object","func","isRequired","connect","common"],"mappings":"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","file":"./scripts/6.js","sourcesContent":["export const getErrors = errors =>\r\n    errors &&\r\n    errors.data &&\r\n    errors.data.reduce(\r\n        (prev, curr) => ({ ...prev, [curr.param]: curr.msg }),\r\n        {}\r\n    );\r\n","import { setErrors, setModal } from './common';\r\n\r\nexport const setEvent = event => ({\r\n    type: 'SET_EVENT',\r\n    event\r\n});\r\n\r\nexport const getEvents = () => dispatch => {\r\n    fetch('https://wiakc.herokuapp.com/calendar')\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            dispatch({\r\n                type: 'GET_EVENTS',\r\n                events: json.events\r\n            });\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const addEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch('https://wiakc.herokuapp.com/calendar', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: getState().user.token\r\n        },\r\n        body\r\n    })\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 201) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const updateEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: getState().user.token\r\n            },\r\n            body\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const deleteEvent = () => (dispatch, getState) =>\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: getState().user.token\r\n            }\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n","//TODO: validation\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Flatpickr from 'react-flatpickr';\r\n\r\nimport 'flatpickr/dist/themes/material_green.css';\r\nimport { addEvent, updateEvent, deleteEvent } from '../../redux/actions/events';\r\nimport { getErrors } from '../../redux/selectors/common';\r\n\r\nexport class AddEvent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            date:\r\n                (this.props.event && this.props.event.date * 1000) ||\r\n                Date.now(),\r\n            title: (this.props.event && this.props.event.title) || '',\r\n            details: (this.props.event && this.props.event.details) || '',\r\n            emphasis: (this.props.event && this.props.event.emphasis) || false\r\n        };\r\n    }\r\n\r\n    onSumbit = type => e => {\r\n        e.preventDefault();\r\n\r\n        const parsedDate = {\r\n            date: this.state.date / 1000,\r\n            title: this.state.title,\r\n            details: this.state.details,\r\n            emphasis: this.state.emphasis\r\n        };\r\n\r\n        switch (type) {\r\n            case 0:\r\n                this.props.addEvent(parsedDate);\r\n                break;\r\n            case 1:\r\n                this.props.updateEvent(parsedDate);\r\n                break;\r\n            case 2:\r\n                this.props.deleteEvent();\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"event\">\r\n                <label className=\"event__major\">\r\n                    <strong>Major Event</strong>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className=\"event__major--input\"\r\n                        checked={this.state.emphasis}\r\n                        onChange={e =>\r\n                            this.setState({\r\n                                emphasis: e.target.checked\r\n                            })\r\n                        }\r\n                        name=\"emphasis\"\r\n                    />\r\n                </label>\r\n                <div className=\"event__date\">\r\n                    <Flatpickr\r\n                        data-enable-time\r\n                        value={this.state.date}\r\n                        options={{\r\n                            altInput: true,\r\n                            altFormat: 'M J, h:iK'\r\n                        }}\r\n                        onChange={date =>\r\n                            this.setState({ date: date[0].getTime() })\r\n                        }\r\n                    />\r\n                </div>\r\n                <div className=\"event__title\">\r\n                    <input\r\n                        className=\"event__title--input\"\r\n                        value={this.state.title}\r\n                        onChange={e => this.setState({ title: e.target.value })}\r\n                        type=\"text\"\r\n                        placeholder=\"Event Title\"\r\n                        name=\"title\"\r\n                    />\r\n                </div>\r\n                <textarea\r\n                    className=\"event__details\"\r\n                    onChange={e => this.setState({ details: e.target.value })}\r\n                    type=\"text\"\r\n                    placeholder=\"Description\"\r\n                    name=\"details\"\r\n                    value={this.state.details}\r\n                />\r\n                {(this.props.event && (\r\n                    <div className=\"event__buttons\">\r\n                        <button\r\n                            className=\"event__submit event__submit--update\"\r\n                            onClick={this.onSumbit(1)}\r\n                        >\r\n                            Update Event\r\n                        </button>\r\n                        <button\r\n                            className=\"event__submit event__submit--delete\"\r\n                            onClick={this.onSumbit(2)}\r\n                        >\r\n                            Delete Event\r\n                        </button>\r\n                    </div>\r\n                )) || (\r\n                    <div className=\"event__buttons\">\r\n                        <button\r\n                            className=\"event__submit event__submit--add\"\r\n                            onClick={this.onSumbit(0)}\r\n                        >\r\n                            Add Event\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    errors: getErrors(state.common.errors), //TODO: add validation\r\n    event: state.events.event\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    addEvent: data => addEvent(data),\r\n    updateEvent: data => updateEvent(data),\r\n    deleteEvent\r\n};\r\n\r\nAddEvent.propTypes = {\r\n    event: PropTypes.object,\r\n    addEvent: PropTypes.func.isRequired,\r\n    updateEvent: PropTypes.func.isRequired,\r\n    deleteEvent: PropTypes.func.isRequired,\r\n    errors: PropTypes.object\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(AddEvent);\r\n"],"sourceRoot":""}