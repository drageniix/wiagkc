{"version":3,"sources":["webpack:///./src/redux/selectors/common.js","webpack:///./src/redux/actions/events.js","webpack:///./src/components/HomePage/EventForm.jsx"],"names":["getErrors","errors","data","reduce","prev","curr","_objectSpread","_defineProperty","param","msg","setEvent","event","type","getEvents","dispatch","setLoading","fetch","then","res","json","events","catch","err","setErrors","addEvent","getState","body","JSON","stringify","method","headers","Content-Type","Authorization","user","token","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","next","sent","status","setModal","stop","this","_x","apply","arguments","updateEvent","_id","_ref2","_callee2","_context2","_x2","deleteEvent","_ref3","_callee3","_context3","_x3","AddEvent","_React$Component","props","_this","_classCallCheck","_getPrototypeOf","call","_assertThisInitialized","e","preventDefault","parsedDate","date","state","title","details","Date","setHours","_inherits","React","Component","key","value","_this2","_this$state","_this$props","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","react_flatpickr__WEBPACK_IMPORTED_MODULE_3___default","data-enable-time","options","altInput","altFormat","onChange","setState","getTime","target","placeholder","name","react_autosize_textarea_lib__WEBPACK_IMPORTED_MODULE_7___default","rows","onClick","onSumbit","mapDispatchToProps","propTypes","PropTypes","object","func","isRequired","connect","common"],"mappings":"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","file":"./scripts/9.js","sourcesContent":["export const getErrors = errors =>\r\n    errors &&\r\n    errors.data &&\r\n    errors.data.reduce(\r\n        (prev, curr) => ({ ...prev, [curr.param]: curr.msg }),\r\n        {}\r\n    );\r\n","import { setErrors, setModal, setLoading } from './common';\r\n\r\nexport const setEvent = event => ({\r\n    type: 'SET_EVENT',\r\n    event\r\n});\r\n\r\nexport const getEvents = () => dispatch => {\r\n    dispatch(setLoading(true));\r\n    fetch('https://wiakc.herokuapp.com/calendar')\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            dispatch({\r\n                type: 'GET_EVENTS',\r\n                events: json.events\r\n            });\r\n            dispatch(setLoading(false));\r\n        })\r\n        .catch(err => {\r\n            dispatch(setErrors(err));\r\n            dispatch(setLoading(false));\r\n        });\r\n};\r\n\r\nexport const addEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch('https://wiakc.herokuapp.com/calendar', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: getState().user.token\r\n        },\r\n        body\r\n    })\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 201) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const updateEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: getState().user.token\r\n            },\r\n            body\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const deleteEvent = () => (dispatch, getState) =>\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: getState().user.token\r\n            }\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n","//TODO: validation\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport 'flatpickr/dist/themes/material_green.css';\r\nimport { addEvent, updateEvent, deleteEvent } from '../../redux/actions/events';\r\nimport { getErrors } from '../../redux/selectors/common';\r\nimport TextareaAutosize from 'react-autosize-textarea/lib';\r\n\r\nexport class AddEvent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            date:\r\n                (this.props.event && this.props.event.date * 1000) ||\r\n                new Date().setHours(19, 0, 0, 0),\r\n            title: (this.props.event && this.props.event.title) || '',\r\n            details: (this.props.event && this.props.event.details) || ''\r\n        };\r\n    }\r\n\r\n    onSumbit = type => e => {\r\n        e.preventDefault();\r\n\r\n        const parsedDate = {\r\n            date: this.state.date / 1000,\r\n            title: this.state.title,\r\n            details: this.state.details\r\n        };\r\n\r\n        switch (type) {\r\n            case 0:\r\n                this.props.addEvent(parsedDate);\r\n                break;\r\n            case 1:\r\n                this.props.updateEvent(parsedDate);\r\n                break;\r\n            case 2:\r\n                this.props.deleteEvent();\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { date, title, details } = this.state;\r\n        const { errors, event } = this.props;\r\n        return (\r\n            <div className=\"event-form\">\r\n                <div className=\"event-form__date\">\r\n                    <Flatpickr\r\n                        data-enable-time\r\n                        value={date}\r\n                        options={{\r\n                            altInput: true,\r\n                            altFormat: 'M J, h:iK'\r\n                        }}\r\n                        onChange={date =>\r\n                            this.setState({ date: date[0].getTime() })\r\n                        }\r\n                    />\r\n                </div>\r\n                <div className=\"event-form__title\">\r\n                    <input\r\n                        className=\"event-form__title--input\"\r\n                        value={title}\r\n                        onChange={e => this.setState({ title: e.target.value })}\r\n                        type=\"text\"\r\n                        placeholder=\"Event Title\"\r\n                        name=\"title\"\r\n                    />\r\n                    {errors && errors.title && (\r\n                        <p className=\"event-form__invalid\">{errors.title}</p>\r\n                    )}\r\n                </div>\r\n                <TextareaAutosize\r\n                    rows={4}\r\n                    className=\"event-form__details\"\r\n                    onChange={e => this.setState({ details: e.target.value })}\r\n                    type=\"text\"\r\n                    placeholder=\"Description\"\r\n                    name=\"details\"\r\n                    value={details}\r\n                />\r\n                {errors && errors.details && (\r\n                    <p className=\"event-form__invalid\">{errors.details}</p>\r\n                )}\r\n\r\n                {(event && (\r\n                    <div className=\"buttons\">\r\n                        <button\r\n                            className=\"btn btn--update\"\r\n                            onClick={this.onSumbit(1)}\r\n                        >\r\n                            Update\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn--delete\"\r\n                            onClick={this.onSumbit(2)}\r\n                        >\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n                )) || (\r\n                    <div className=\"buttons\">\r\n                        <button\r\n                            className=\"btn btn--add\"\r\n                            onClick={this.onSumbit(0)}\r\n                        >\r\n                            Add Event\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    errors: getErrors(state.common.errors), //TODO: add validation\r\n    event: state.events.event\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    addEvent: data => addEvent(data),\r\n    updateEvent: data => updateEvent(data),\r\n    deleteEvent\r\n};\r\n\r\nAddEvent.propTypes = {\r\n    event: PropTypes.object,\r\n    addEvent: PropTypes.func.isRequired,\r\n    updateEvent: PropTypes.func.isRequired,\r\n    deleteEvent: PropTypes.func.isRequired,\r\n    errors: PropTypes.object\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(AddEvent);\r\n"],"sourceRoot":""}