{"version":3,"sources":["webpack:///./src/redux/selectors/common.js","webpack:///./src/redux/actions/events.js","webpack:///./src/components/HomePage/EventForm.jsx"],"names":["getErrors","errors","data","reduce","prev","curr","_objectSpread","_defineProperty","param","msg","setEvent","event","type","SET_EVENT","getEvents","dispatch","setLoading","fetch","then","res","json","GET_EVENTS","events","catch","err","setErrors","addEvent","getState","body","JSON","stringify","method","headers","Content-Type","Authorization","user","token","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","next","sent","status","closeModal","stop","this","_x","apply","arguments","updateEvent","_id","_ref2","_callee2","_context2","_x2","deleteEvent","_ref3","_callee3","_context3","_x3","AddEvent","_React$Component","props","_this","_classCallCheck","_getPrototypeOf","call","_assertThisInitialized","e","preventDefault","parsedDate","date","state","title","details","Date","setHours","_inherits","React","Component","key","value","_this2","_this$state","_this$props","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","react_flatpickr__WEBPACK_IMPORTED_MODULE_3___default","data-enable-time","options","altInput","altFormat","onChange","setState","getTime","target","placeholder","name","react_autosize_textarea_lib__WEBPACK_IMPORTED_MODULE_7___default","rows","onClick","onSumbit","mapDispatchToProps","propTypes","PropTypes","object","func","isRequired","connect","common"],"mappings":"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","file":"./scripts/9.js","sourcesContent":["export const getErrors = errors =>\r\n    errors &&\r\n    errors.data &&\r\n    errors.data.reduce(\r\n        (prev, curr) => ({ ...prev, [curr.param]: curr.msg }),\r\n        {}\r\n    );\r\n","import { setErrors, setLoading } from './common';\r\nimport { SET_EVENT, GET_EVENTS } from '../constants';\r\nimport { closeModal } from './modals';\r\n\r\nexport const setEvent = event => ({\r\n    type: SET_EVENT,\r\n    event\r\n});\r\n\r\nexport const getEvents = () => dispatch => {\r\n    dispatch(setLoading(true));\r\n    fetch('https://wiakc.herokuapp.com/calendar')\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            dispatch({\r\n                type: GET_EVENTS,\r\n                events: json.events\r\n            });\r\n            dispatch(setLoading(false));\r\n        })\r\n        .catch(err => {\r\n            dispatch(setErrors(err));\r\n            dispatch(setLoading(false));\r\n        });\r\n};\r\n\r\nexport const addEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch('https://wiakc.herokuapp.com/calendar', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: getState().user.token\r\n        },\r\n        body\r\n    })\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 201) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(closeModal());\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const updateEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: getState().user.token\r\n            },\r\n            body\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(closeModal());\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const deleteEvent = () => (dispatch, getState) =>\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: getState().user.token\r\n            }\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(closeModal());\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n","//TODO: validation\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Flatpickr from 'react-flatpickr';\r\nimport 'flatpickr/dist/themes/material_green.css';\r\nimport { addEvent, updateEvent, deleteEvent } from '../../redux/actions/events';\r\nimport { getErrors } from '../../redux/selectors/common';\r\nimport TextareaAutosize from 'react-autosize-textarea/lib';\r\n\r\nexport class AddEvent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            date:\r\n                (this.props.event && this.props.event.date * 1000) ||\r\n                new Date().setHours(19, 0, 0, 0),\r\n            title: (this.props.event && this.props.event.title) || '',\r\n            details: (this.props.event && this.props.event.details) || ''\r\n        };\r\n    }\r\n\r\n    onSumbit = type => e => {\r\n        e.preventDefault();\r\n\r\n        const parsedDate = {\r\n            date: this.state.date / 1000,\r\n            title: this.state.title,\r\n            details: this.state.details\r\n        };\r\n\r\n        switch (type) {\r\n            case 0:\r\n                this.props.addEvent(parsedDate);\r\n                break;\r\n            case 1:\r\n                this.props.updateEvent(parsedDate);\r\n                break;\r\n            case 2:\r\n                this.props.deleteEvent();\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { date, title, details } = this.state;\r\n        const { errors, event } = this.props;\r\n        return (\r\n            <div className=\"event-form\">\r\n                <div className=\"event-form__date\">\r\n                    <Flatpickr\r\n                        data-enable-time\r\n                        value={date}\r\n                        options={{\r\n                            altInput: true,\r\n                            altFormat: 'M J, h:iK'\r\n                        }}\r\n                        onChange={date =>\r\n                            this.setState({ date: date[0].getTime() })\r\n                        }\r\n                    />\r\n                </div>\r\n                <div className=\"event-form__title\">\r\n                    <input\r\n                        className=\"event-form__title--input\"\r\n                        value={title}\r\n                        onChange={e => this.setState({ title: e.target.value })}\r\n                        type=\"text\"\r\n                        placeholder=\"Event Title\"\r\n                        name=\"title\"\r\n                    />\r\n                    {errors && errors.title && (\r\n                        <p className=\"event-form__invalid\">{errors.title}</p>\r\n                    )}\r\n                </div>\r\n                <TextareaAutosize\r\n                    rows={4}\r\n                    className=\"event-form__details\"\r\n                    onChange={e => this.setState({ details: e.target.value })}\r\n                    type=\"text\"\r\n                    placeholder=\"Description\"\r\n                    name=\"details\"\r\n                    value={details}\r\n                />\r\n                {errors && errors.details && (\r\n                    <p className=\"event-form__invalid\">{errors.details}</p>\r\n                )}\r\n\r\n                {(event && (\r\n                    <div className=\"buttons\">\r\n                        <button\r\n                            className=\"btn btn--update\"\r\n                            onClick={this.onSumbit(1)}\r\n                        >\r\n                            Update\r\n                        </button>\r\n                        <button\r\n                            className=\"btn btn--delete\"\r\n                            onClick={this.onSumbit(2)}\r\n                        >\r\n                            Delete\r\n                        </button>\r\n                    </div>\r\n                )) || (\r\n                    <div className=\"buttons\">\r\n                        <button\r\n                            className=\"btn btn--add\"\r\n                            onClick={this.onSumbit(0)}\r\n                        >\r\n                            Add Event\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    errors: getErrors(state.common.errors), //TODO: add validation\r\n    event: state.events.event\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    addEvent: data => addEvent(data),\r\n    updateEvent: data => updateEvent(data),\r\n    deleteEvent\r\n};\r\n\r\nAddEvent.propTypes = {\r\n    event: PropTypes.object,\r\n    addEvent: PropTypes.func.isRequired,\r\n    updateEvent: PropTypes.func.isRequired,\r\n    deleteEvent: PropTypes.func.isRequired,\r\n    errors: PropTypes.object\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(AddEvent);\r\n"],"sourceRoot":""}