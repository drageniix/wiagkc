{"version":3,"sources":["webpack:///./src/redux/actions/events.js","webpack:///./src/components/Modals/EventForm.jsx"],"names":["io","openSocket","setEvent","event","type","getEvents","dispatch","fetch","then","res","json","on","data","action","events","catch","err","setErrors","addEvent","getState","body","JSON","stringify","method","headers","Content-Type","Authorization","user","token","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","status","setModal","stop","this","_x","apply","arguments","updateEvent","_id","_ref2","_callee2","_context2","_x2","deleteEvent","_ref3","_callee3","_context3","_x3","AddEvent","_React$Component","props","_this","_classCallCheck","_getPrototypeOf","call","_assertThisInitialized","e","preventDefault","stopPropagation","parsedDate","date","state","title","details","emphasis","Date","now","_inherits","React","Component","key","value","_this2","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","checked","onChange","setState","target","name","react_flatpickr__WEBPACK_IMPORTED_MODULE_3___default","data-enable-time","options","altInput","altFormat","getTime","placeholder","onClick","onSumbit","mapDispatchToProps","propTypes","PropTypes","object","func","isRequired","connect"],"mappings":"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","file":"./scripts/4.js","sourcesContent":["import openSocket from 'socket.io-client';\r\nimport { setErrors, setModal } from './common';\r\nconst io = openSocket('https://wiakc.herokuapp.com');\r\n\r\nexport const setEvent = event => ({\r\n    type: 'SET_EVENT',\r\n    event\r\n});\r\n\r\nexport const getEvents = () => dispatch => {\r\n    fetch('https://wiakc.herokuapp.com/calendar')\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            io.on('events', data => {\r\n                switch (data.action) {\r\n                    case 'create':\r\n                        dispatch({ type: 'CREATE_EVENT', event: data.event });\r\n                        break;\r\n                    case 'update':\r\n                        dispatch({ type: 'UPDATE_EVENT', event: data.event });\r\n                        break;\r\n                    case 'delete':\r\n                        dispatch({ type: 'DELETE_EVENT', event: data.event });\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n\r\n            dispatch({\r\n                type: 'GET_EVENTS',\r\n                events: json.events\r\n            });\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const addEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch('https://wiakc.herokuapp.com/calendar', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Authorization: getState().user.token\r\n        },\r\n        body\r\n    })\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 201) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const updateEvent = data => (dispatch, getState) => {\r\n    const body = JSON.stringify(data);\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: getState().user.token\r\n            },\r\n            body\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n};\r\n\r\nexport const deleteEvent = () => (dispatch, getState) =>\r\n    fetch(\r\n        'https://wiakc.herokuapp.com/calendar/' + getState().events.event._id,\r\n        {\r\n            method: 'DELETE',\r\n            headers: {\r\n                Authorization: getState().user.token\r\n            }\r\n        }\r\n    )\r\n        .then(async res => {\r\n            const json = await res.json();\r\n            if (res.status !== 200) {\r\n                dispatch(setErrors(json));\r\n            } else {\r\n                dispatch(setModal(0));\r\n                dispatch(setEvent(null));\r\n            }\r\n        })\r\n        .catch(err => dispatch(setErrors(err)));\r\n","//TODO: validation\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport Flatpickr from 'react-flatpickr';\r\n\r\nimport 'flatpickr/dist/themes/material_green.css';\r\nimport { addEvent, updateEvent, deleteEvent } from '../../redux/actions/events';\r\n\r\nexport class AddEvent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            date:\r\n                (this.props.event && this.props.event.date * 1000) ||\r\n                Date.now(),\r\n            title: (this.props.event && this.props.event.title) || '',\r\n            details: (this.props.event && this.props.event.details) || '',\r\n            emphasis: (this.props.event && this.props.event.emphasis) || false\r\n        };\r\n    }\r\n\r\n    onSumbit = type => e => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        const parsedDate = {\r\n            date: this.state.date / 1000,\r\n            title: this.state.title,\r\n            details: this.state.details,\r\n            emphasis: this.state.emphasis\r\n        };\r\n\r\n        switch (type) {\r\n            case 0:\r\n                this.props.addEvent(parsedDate);\r\n                break;\r\n            case 1:\r\n                this.props.updateEvent(parsedDate);\r\n                break;\r\n            case 2:\r\n                this.props.deleteEvent();\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"event\">\r\n                <label className=\"event__major\">\r\n                    <strong>Major Event</strong>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className=\"event__major--input\"\r\n                        checked={this.state.emphasis}\r\n                        onChange={e =>\r\n                            this.setState({\r\n                                emphasis: e.target.checked\r\n                            })\r\n                        }\r\n                        name=\"emphasis\"\r\n                    />\r\n                </label>\r\n                <div className=\"event__date\">\r\n                    <Flatpickr\r\n                        data-enable-time\r\n                        value={this.state.date}\r\n                        options={{\r\n                            altInput: true,\r\n                            altFormat: 'M J, h:iK'\r\n                        }}\r\n                        onChange={date =>\r\n                            this.setState({ date: date[0].getTime() })\r\n                        }\r\n                    />\r\n                </div>\r\n                <div className=\"event__title\">\r\n                    <input\r\n                        className=\"event__title--input\"\r\n                        value={this.state.title}\r\n                        onChange={e => this.setState({ title: e.target.value })}\r\n                        type=\"text\"\r\n                        placeholder=\"Event Title\"\r\n                        name=\"title\"\r\n                    />\r\n                </div>\r\n                <textarea\r\n                    className=\"event__details\"\r\n                    onChange={e => this.setState({ details: e.target.value })}\r\n                    type=\"text\"\r\n                    placeholder=\"Description\"\r\n                    name=\"details\"\r\n                    value={this.state.details}\r\n                />\r\n                {(this.props.event && (\r\n                    <div className=\"event__buttons\">\r\n                        <button\r\n                            className=\"event__submit event__submit--update\"\r\n                            onClick={this.onSumbit(1)}\r\n                        >\r\n                            Update Event\r\n                        </button>\r\n                        <button\r\n                            className=\"event__submit event__submit--delete\"\r\n                            onClick={this.onSumbit(2)}\r\n                        >\r\n                            Delete Event\r\n                        </button>\r\n                    </div>\r\n                )) || (\r\n                    <div className=\"event__buttons\">\r\n                        <button\r\n                            className=\"event__submit event__submit--add\"\r\n                            onClick={this.onSumbit(0)}\r\n                        >\r\n                            Add Event\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    event: state.events.event\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    addEvent: data => addEvent(data),\r\n    updateEvent: data => updateEvent(data),\r\n    deleteEvent\r\n};\r\n\r\nAddEvent.propTypes = {\r\n    event: PropTypes.object,\r\n    addEvent: PropTypes.func.isRequired,\r\n    updateEvent: PropTypes.func.isRequired,\r\n    deleteEvent: PropTypes.func.isRequired\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(AddEvent);\r\n"],"sourceRoot":""}