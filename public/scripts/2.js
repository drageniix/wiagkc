(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{373:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r});var r=function(t){return t&&t.data&&t.data.reduce(function(t,e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},t,o({},e.param,e.msg))},{})}},375:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return f}),n.d(e,"f",function(){return l}),n.d(e,"b",function(){return m});var a=n(14);function u(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function c(i){return function(){var t=this,c=arguments;return new Promise(function(e,n){var r=i.apply(t,c);function o(t){u(r,e,n,o,a,"next",t)}function a(t){u(r,e,n,o,a,"throw",t)}o(void 0)})}}var r=function(t){return{type:"SET_POST",post:t}},i=function(t){return{type:"SET_EDITING",editing:t}},o=function(e){return function(t){t({type:"SET_POSTS_PAGE",page:e}),t(p())}},s=function(t){return function(e){e(r(void 0)),fetch("https://wiakc.herokuapp.com/feed/post/"+t).then(function(t){return t.json()}).then(function(t){return e(r(t.post))}).catch(function(t){return e(Object(a.a)(t))})}},p=function(){return function(e,t){fetch("https://wiakc.herokuapp.com/feed/posts?page="+t().feed.page).then(function(t){return t.json()}).then(function(t){e({type:"GET_POSTS",posts:t.posts,totalItems:t.totalItems,itemsPerPage:t.itemsPerPage})}).catch(function(t){return e(Object(a.a)(t))})}},f=function(n){return function(r,t){var e=JSON.stringify(n);fetch("https://wiakc.herokuapp.com/feed/post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:e}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,201!==e.status&&r(Object(a.a)(n));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}},l=function(n,o){return function(r,t){var e=JSON.stringify(o);fetch("https://wiakc.herokuapp.com/feed/post/"+n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:e}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status?r(Object(a.a)(n)):r(i(""));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}},m=function(e){return function(r,t){return fetch("https://wiakc.herokuapp.com/feed/post/"+e,{method:"DELETE",headers:{Authorization:t().user.token}}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status&&r(Object(a.a)(n));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}}},377:function(t,e,n){"use strict";var r=n(1),o=n.n(r),a=n(2),c=function(t){var e=t.className;return o.a.createElement("div",{className:e||"loading-icon"},o.a.createElement("img",{src:"https://i.gifer.com/ZNeS.gif",className:"loading-icon"}),o.a.createElement("h4",{className:"centered"},"Loading!"))};c.propTypes={className:n.n(a).a.string},e.a=c},382:function(t,e,n){"use strict";var r=n(1),c=n.n(r),o=n(2),a=n.n(o),i=n(383),u=n.n(i),s=n(375),p=n(24),f=n(482),l=function(t){var e=t.post,n=t.setEditing,r=t.editable,o=t.history,a=t.fromFeed;return c.a.createElement("div",{className:"post "+(a?"post__feed":""),onClick:function(){return r&&n(e._id)||o.push("/feed/"+e._id)}},c.a.createElement("h1",{className:"post__title"},e.title),c.a.createElement(u.a,{className:"post__content",source:a?e.content.substring(0,500)+(500<e.content.length?"...":""):e.content}),c.a.createElement("h2",{className:"post__author"},e.creator.name),c.a.createElement("h6",{className:"post__date"},e.updatedAt),c.a.createElement("h6",{className:"post__comments"},e.comments.length," Comment",1===e.comments.length?"":"s"))};l.propTypes={post:a.a.object,setEditing:a.a.func,editable:a.a.bool,history:a.a.object,fromFeed:a.a.bool};var m={setEditing:s.d};e.a=Object(p.b)(null,m)(Object(f.a)(l))},389:function(t,e,n){"use strict";var r=n(1),o=n.n(r),a=n(24),c=n(2),i=n.n(c),u=n(375),s=n(373),p=n(482);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){function i(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=this,r=(t=m(i)).call.apply(t,[this].concat(a)),h(d(d(n=!r||"object"!==f(r)&&"function"!=typeof r?d(e):r)),"state",{title:n.props.post&&n.props.post.title||"",content:n.props.post&&n.props.post.content||""}),h(d(d(n)),"onChange",function(t){return n.setState(h({},t.target.name,t.target.value))}),h(d(d(n)),"onSumbit",function(e){return function(t){switch(t.preventDefault(),e){case 0:n.props.addPost(n.state);break;case 1:n.props.updatePost(n.props.post._id,n.state);break;case 2:n.props.deletePost(n.props.post._id),n.props.history.push("/feed")}n.props.post||n.setState({title:"",content:""})}}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(i,o.a.Component),e=i,(n=[{key:"render",value:function(){var t=this.props.errors,e=this.state,n=e.content,r=e.title;return o.a.createElement("div",{className:"post-form__container"},o.a.createElement("div",{className:"post-form"},o.a.createElement("input",{className:"post-form__title",value:r,onChange:this.onChange,type:"text",placeholder:"New Post Title",name:"title"}),t&&t.title&&o.a.createElement("p",{className:"post-form__invalid"},t.title)),o.a.createElement("div",{className:"post-form"},o.a.createElement("textarea",{className:"post-form__content",value:n,onChange:this.onChange,placeholder:"Share a recipe, experience, or anything else!",name:"content"}),t&&t.content&&o.a.createElement("p",{className:"post-form__invalid"},t.content)),this.props.post&&o.a.createElement("div",{className:"post-form__buttons"},o.a.createElement("button",{className:"btn btn--update",onClick:this.onSumbit(1)},"Update Post"),o.a.createElement("button",{className:"btn btn--delete",onClick:this.onSumbit(2)},"Delete Post"))||o.a.createElement("div",{className:"post-form__buttons"},o.a.createElement("button",{className:"btn btn--add",onClick:this.onSumbit(0)},"Add Post")))}}])&&l(e.prototype,n),r&&l(e,r),i}(),v={addPost:u.a,updatePost:u.f,deletePost:u.b};y.propTypes={post:i.a.object,addPost:i.a.func.isRequired,updatePost:i.a.func.isRequired,deletePost:i.a.func.isRequired,errors:i.a.object,history:i.a.object},e.a=Object(a.b)(function(t){return{errors:Object(s.a)(t.common.errors)}},v)(Object(p.a)(y))},489:function(t,e,n){"use strict";n.r(e);var a=n(1),u=n.n(a),r=n(2),o=n.n(r),c=n(389),i=n(482),s=n(24),p=n(375),f=n(382),l=n(383),m=n.n(l);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g,_,O,j=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,y(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,a["Component"]),n=e,(r=[{key:"render",value:function(){var t=this.props,e=t.comment,n=e._id,r=e.content,o=e.creator,a=o.name,c=o.flag,i=t.setEditing;return u.a.createElement("div",{className:"comment",onClick:function(){return i(n)}},u.a.createElement("div",{className:"comment__user"},u.a.createElement("img",{className:"comment__user--flag",src:c}),u.a.createElement("p",{className:"comment__user--author"},a)),u.a.createElement(m.a,{className:"comment__content",source:r}))}}])&&d(n.prototype,r),o&&d(n,o),e}();g=j,_="propTypes",O={comment:o.a.object,ownsComment:o.a.bool,setEditing:o.a.func},_ in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O;var w={setEditing:p.d},E=Object(s.b)(null,w)(j),P=n(14);function S(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function k(i){return function(){var t=this,c=arguments;return new Promise(function(e,n){var r=i.apply(t,c);function o(t){S(r,e,n,o,a,"next",t)}function a(t){S(r,e,n,o,a,"throw",t)}o(void 0)})}}var N=n(373);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=function(t){function i(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=this,r=(t=x(i)).call.apply(t,[this].concat(a)),A(I(I(n=!r||"object"!==C(r)&&"function"!=typeof r?I(e):r)),"state",{content:n.props.comment&&n.props.comment.content||""}),A(I(I(n)),"onChange",function(t){return n.setState(A({},t.target.name,t.target.value))}),A(I(I(n)),"onSumbit",function(e){return function(t){switch(t.preventDefault(),e){case 0:n.props.addComment(n.state);break;case 1:n.props.updateComment(n.props.comment._id,n.state);break;case 2:n.props.deleteComment(n.props.comment._id)}n.props.comment||n.setState({content:""})}}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(i,u.a.Component),e=i,(n=[{key:"render",value:function(){var t=this.props.errors,e=this.state.content;return u.a.createElement("div",{className:"comment-form"},u.a.createElement("div",{className:"comment-form__input"},u.a.createElement("textarea",{className:"comment-form__input--content",value:e,onChange:this.onChange,placeholder:"What do you think?",name:"content"})),t&&t.content&&u.a.createElement("p",{className:"comment-form__invalid"},t.content),this.props.comment&&u.a.createElement("div",{className:"comment-form__buttons"},u.a.createElement("button",{className:"btn btn--update",onClick:this.onSumbit(1)},"Update Comment"),u.a.createElement("button",{className:"btn btn--delete",onClick:this.onSumbit(2)},"Delete Comment"))||u.a.createElement("div",{className:"comment-form__buttons"},u.a.createElement("button",{className:"btn btn--add",onClick:this.onSumbit(0)},"Add Comment")))}}])&&T(e.prototype,n),r&&T(e,r),i}(),q={addComment:function(o){return function(r,t){var e,n=JSON.stringify(o);fetch("https://wiakc.herokuapp.com/feed/post/"+t().feed.post._id+"/comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:n}).then((e=k(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,201!==e.status&&r(Object(P.a)(n));case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})).catch(function(t){return r(Object(P.a)(t))})}},updateComment:function(o,a){return function(r,t){var e,n=JSON.stringify(a);fetch("https://wiakc.herokuapp.com/feed/post/"+t().feed.post._id+"/comments/"+o,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:n}).then((e=k(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status?r(Object(P.a)(n)):r(Object(p.d)(""));case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})).catch(function(t){return r(Object(P.a)(t))})}},deleteComment:function(n){return function(r,t){return fetch("https://wiakc.herokuapp.com/feed/post/"+t().feed.post._id+"/comments/"+n,{method:"DELETE",headers:{Authorization:t().user.token}}).then((e=k(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status&&r(Object(P.a)(n));case 4:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})).catch(function(t){return r(Object(P.a)(t))});var e}}};D.propTypes={comment:o.a.object,addComment:o.a.func.isRequired,updateComment:o.a.func.isRequired,deleteComment:o.a.func.isRequired,errors:o.a.object};var z=Object(s.b)(function(t){return{errors:Object(N.a)(t.common.errors)}},q)(D);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,G(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,u.a.Component),n=e,(r=[{key:"render",value:function(){var t=this.props,e=t.comments,n=t.editing,r=t.userId;return u.a.createElement("div",{className:"comments"},e.map(function(t,e){return u.a.createElement(a.Fragment,{key:e},r===t.creator._id&&n===t._id&&u.a.createElement(z,{comment:t})||u.a.createElement(E,{comment:t}))}),r&&u.a.createElement("div",{className:"comments__new"},u.a.createElement(z,null)))}}])&&J(n.prototype,r),o&&J(n,o),e}();M.propTypes={editing:o.a.string,comments:o.a.array,userId:o.a.string};var W=Object(s.b)(function(t){return{comments:t.feed.post.comments,editing:t.feed.editing,userId:t.user.userId}})(M),Z=n(377);function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"PostPage",function(){return tt});var X,Y,$,tt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),K(this,Q(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,a["Component"]),n=e,(r=[{key:"componentDidMount",value:function(){this.props.getPost(this.props.postId)}},{key:"render",value:function(){var t=this.props,e=t.post,n=t.showForm,r=t.editable;return u.a.createElement("div",{className:"individual-post",onClick:function(){return Object(p.d)("")}},e&&u.a.createElement("div",{className:"individual-post__container"},n&&r&&u.a.createElement(c.a,{post:e})||u.a.createElement(f.a,{post:e,editable:r}),u.a.createElement(W,null))||u.a.createElement(Z.a,null))}}])&&H(n.prototype,r),o&&H(n,o),e}();X=tt,Y="propTypes",$={post:o.a.object,postId:o.a.string,showForm:o.a.bool,editable:o.a.bool,getPost:o.a.func,setEditing:o.a.func},Y in X?Object.defineProperty(X,Y,{value:$,enumerable:!0,configurable:!0,writable:!0}):X[Y]=$;var et={getPost:p.c,setEditing:p.d};e.default=Object(s.b)(function(t,e){var n=e.match;return{showForm:!!t.feed.post&&t.feed.editing===t.feed.post._id,editable:!!t.feed.post&&t.feed.post.creator._id===t.user.userId,postId:n.params.postId,post:t.feed.post}},et)(Object(i.a)(tt))}}]);
//# sourceMappingURL=2.js.map