(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{496:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(2),r=n.n(o),c=n(404),i=n(375),u=n(25),f=n(379),l=n(403),m=n(383),p=n.n(m),b=n(82);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E,_,O,w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,v(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.comment,n=t._id,o=t.content,r=t.creator,a=r.name,c=r.flag,i=e.setEditing,u=e.canEditComment;return s.a.createElement("div",{className:"comment"},s.a.createElement("div",{className:"comment__user"},s.a.createElement("img",{className:"comment__user--flag",src:c}),s.a.createElement("p",{className:"comment__user--author"},a),u&&s.a.createElement("svg",{className:"icon icon--edit pointer",onClick:function(){return i(n)},viewBox:"0 0 32 32"},s.a.createElement("title",null,"Edit Event"),s.a.createElement("path",{d:"M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z"}))),s.a.createElement(p.a,{className:"comment__content",source:o}))}}])&&y(n.prototype,o),r&&y(n,r),t}();E=w,_="propTypes",O={comment:r.a.object,ownsComment:r.a.bool,setEditing:r.a.func,canEditComment:r.a.bool},_ in E?Object.defineProperty(E,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[_]=O;var j={setEditing:f.d},C=Object(u.b)(function(e,t){var n,o,r=t.comment;return{canEditComment:(o=e,n=r,o.user.userId===n.creator._id||Object(b.c)(o.user,3))}},j)(w),k=n(386),P=n.n(k),S=n(47);function N(e,t,n,o,r,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(o,r)}function T(i){return function(){var e=this,c=arguments;return new Promise(function(t,n){var o=i.apply(e,c);function r(e){N(o,t,n,r,a,"next",e)}function a(e){N(o,t,n,r,a,"throw",e)}r(void 0)})}}var x=n(377);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function i(){var e,n,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=this,o=(e=z(i)).call.apply(e,[this].concat(a)),A(F(F(n=!o||"object"!==R(o)&&"function"!=typeof o?F(t):o)),"state",{content:n.props.comment&&n.props.comment.content||""}),A(F(F(n)),"onChange",function(e){return n.setState(A({},e.target.name,e.target.value))}),A(F(F(n)),"onSumbit",function(t){return function(e){switch(e.preventDefault(),t){case 0:n.props.addComment(n.state);break;case 1:n.props.updateComment(n.props.comment._id,n.state);break;case 2:n.props.deleteComment(n.props.comment._id)}n.props.comment||n.setState({content:""})}}),n}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,s.a.Component),t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.errors,n=e.comment,o=e.setEditing,r=this.state.content;return s.a.createElement("div",{className:"comment-form"},!!n&&s.a.createElement("svg",{className:"icon icon--cancel pointer",onClick:function(){return o("")},viewBox:"0 0 32 32"},s.a.createElement("title",null,"Cancel Editing"),s.a.createElement("path",{d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z"}),s.a.createElement("path",{d:"M21 8l-5 5-5-5-3 3 5 5-5 5 3 3 5-5 5 5 3-3-5-5 5-5z"})),s.a.createElement("div",{className:"comment-form__input"},s.a.createElement(P.a,{rows:4,className:"comment-form__input--content",value:r,onChange:this.onChange,placeholder:"What do you think?",name:"content"})),t&&t.content&&s.a.createElement("p",{className:"comment-form__invalid"},t.content),n&&s.a.createElement("div",{className:"comment-form__buttons"},s.a.createElement("button",{className:"btn btn--update",onClick:this.onSumbit(1)},"Update"),s.a.createElement("button",{className:"btn btn--delete",onClick:this.onSumbit(2)},"Delete"))||s.a.createElement("div",{className:"comment-form__buttons"},s.a.createElement("button",{className:"btn btn--add",onClick:this.onSumbit(0)},"Add Comment")))}}])&&I(t.prototype,n),o&&I(t,o),i}(),J={addComment:function(r){return function(o,e){var t,n=JSON.stringify(r);fetch("https://wiakc.herokuapp.com/feed/post/"+e().feed.post._id+"/comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:e().user.token},body:n}).then((t=T(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,201!==t.status&&o(Object(S.a)(n));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})).catch(function(e){return o(Object(S.a)(e))})}},updateComment:function(r,a){return function(o,e){var t,n=JSON.stringify(a);fetch("https://wiakc.herokuapp.com/feed/post/"+e().feed.post._id+"/comments/"+r,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:e().user.token},body:n}).then((t=T(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,200!==t.status?o(Object(S.a)(n)):o(Object(f.d)(""));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})).catch(function(e){return o(Object(S.a)(e))})}},deleteComment:function(n){return function(o,e){return fetch("https://wiakc.herokuapp.com/feed/post/"+e().feed.post._id+"/comments/"+n,{method:"DELETE",headers:{Authorization:e().user.token}}).then((t=T(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,200!==t.status&&o(Object(S.a)(n));case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})).catch(function(e){return o(Object(S.a)(e))});var t}},setEditing:f.d};D.propTypes={comment:r.a.object,addComment:r.a.func.isRequired,updateComment:r.a.func.isRequired,deleteComment:r.a.func.isRequired,errors:r.a.object,setEditing:r.a.func};var q=Object(u.b)(function(e){return{errors:Object(x.a)(e.common.errors)}},J)(D);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,W(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,s.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.isEditingComment,o=e.userId;return s.a.createElement("div",{className:"comments"},t.map(function(e,t){return s.a.createElement(a.Fragment,{key:t},n(e)&&s.a.createElement(q,{comment:e})||s.a.createElement(C,{comment:e}))}),o&&s.a.createElement("div",{className:"comments__new"},s.a.createElement(q,null)))}}])&&U(n.prototype,o),r&&U(n,r),t}();H.propTypes={isEditingComment:r.a.func,comments:r.a.array,userId:r.a.string};var K=Object(u.b)(function(e){return{comments:e.feed.post.comments,userId:e.user.userId,isEditingComment:(t=e,function(e){return(t.user.userId===e.creator._id||Object(b.c)(t.user,3))&&t.feed.editing===e._id})};var t})(H),Q=n(380);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"PostPage",function(){return oe});var ee,te,ne,oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,Z(t).apply(this,arguments))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.getPost(this.props.postId)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.showForm,o=e.editable,r=e.loading;return s.a.createElement("div",{className:"individual-post",onClick:function(){return Object(f.d)("")}},r&&s.a.createElement(Q.a,null)||s.a.createElement("div",{className:"individual-post__container"},t&&s.a.createElement(a.Fragment,null,n&&o&&s.a.createElement(c.a,{post:t})||s.a.createElement(l.a,{post:t,editable:o}),s.a.createElement(K,null))||"No Post Found"))}}])&&X(n.prototype,o),r&&X(n,r),t}();ee=oe,te="propTypes",ne={post:r.a.object,postId:r.a.string,showForm:r.a.bool,editable:r.a.bool,getPost:r.a.func,setEditing:r.a.func,loading:r.a.bool},te in ee?Object.defineProperty(ee,te,{value:ne,enumerable:!0,configurable:!0,writable:!0}):ee[te]=ne;var re={getPost:f.c,setEditing:f.d};t.default=Object(u.b)(function(e,t){var n=t.match;return{showForm:!!e.feed.post&&e.feed.editing===e.feed.post._id,editable:!!e.feed.post&&(e.feed.post.creator._id===e.user.userId||Object(b.c)(e.user,3)),postId:n.params.postId,post:e.feed.post,loading:e.common.loading}},re)(Object(i.a)(oe))}}]);
//# sourceMappingURL=4.js.map