(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{372:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return r});var r=function(t){return t&&t.data&&t.data.reduce(function(t,e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},t,o({},e.param,e.msg))},{})}},374:function(t,e,n){"use strict";n.d(e,"d",function(){return u}),n.d(e,"e",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return f}),n.d(e,"f",function(){return l}),n.d(e,"b",function(){return b});var a=n(14);function i(t,e,n,r,o,a,c){try{var u=t[a](c),i=u.value}catch(t){return void n(t)}u.done?e(i):Promise.resolve(i).then(r,o)}function c(u){return function(){var t=this,c=arguments;return new Promise(function(e,n){var r=u.apply(t,c);function o(t){i(r,e,n,o,a,"next",t)}function a(t){i(r,e,n,o,a,"throw",t)}o(void 0)})}}var r=function(t){return{type:"SET_POST",post:t}},u=function(t){return{type:"SET_EDITING",editing:t}},o=function(e){return function(t){t({type:"SET_POSTS_PAGE",page:e}),t(p())}},s=function(t){return function(e){e(r(void 0)),fetch("https://wiakc.herokuapp.com/feed/post/"+t).then(function(t){return t.json()}).then(function(t){return e(r(t.post))}).catch(function(t){return e(Object(a.a)(t))})}},p=function(){return function(e,t){fetch("https://wiakc.herokuapp.com/feed/posts?page="+t().feed.page).then(function(t){return t.json()}).then(function(t){e({type:"GET_POSTS",posts:t.posts,totalItems:t.totalItems,itemsPerPage:t.itemsPerPage})}).catch(function(t){return e(Object(a.a)(t))})}},f=function(n){return function(r,t){var e=JSON.stringify(n);fetch("https://wiakc.herokuapp.com/feed/post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:e}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,201!==e.status&&r(Object(a.a)(n));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}},l=function(n,o){return function(r,t){var e=JSON.stringify(o);fetch("https://wiakc.herokuapp.com/feed/post/"+n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t().user.token},body:e}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status?r(Object(a.a)(n)):r(u(""));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}},b=function(e){return function(r,t){return fetch("https://wiakc.herokuapp.com/feed/post/"+e,{method:"DELETE",headers:{Authorization:t().user.token}}).then(function(){var e=c(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:n=t.sent,200!==e.status&&r(Object(a.a)(n));case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return r(Object(a.a)(t))})}}},380:function(t,e,n){"use strict";var r=n(1),o=n.n(r),a=n(2),c=n.n(a),u=n(374),i=n(24),s=n(387),p=function(t){var e=t.post,n=t.setEditing,r=t.editable;return o.a.createElement("div",{className:"posts__post",onClick:r&&function(){return n(e._id)}},o.a.createElement("h1",{className:"posts__post--title"},e.title),o.a.createElement("h2",{className:"posts__post--author"},e.creator.name),o.a.createElement("h6",{className:"posts__post--date"},e.updatedAt),o.a.createElement(s,{className:"posts__post--content",source:e.content}))};p.propTypes={post:c.a.object,setEditing:c.a.func,editable:c.a.bool};var f={setEditing:u.d};e.a=Object(i.b)(null,f)(p)},386:function(t,e,n){"use strict";var r=n(1),o=n.n(r),a=n(24),c=n(2),u=n.n(c),i=n(374),s=n(372),p=n(480);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){function u(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=this,r=(t=b(u)).call.apply(t,[this].concat(a)),h(y(y(n=!r||"object"!==f(r)&&"function"!=typeof r?y(e):r)),"state",{title:n.props.post&&n.props.post.title||"",content:n.props.post&&n.props.post.content||""}),h(y(y(n)),"onChange",function(t){return n.setState(h({},t.target.name,t.target.value))}),h(y(y(n)),"onSumbit",function(e){return function(t){switch(t.preventDefault(),e){case 0:n.props.addPost(n.state);break;case 1:n.props.updatePost(n.props.post._id,n.state);break;case 2:n.props.deletePost(n.props.post._id),n.props.history.push("/feed")}n.props.post||n.setState({title:"",content:""})}}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(u,o.a.Component),e=u,(n=[{key:"render",value:function(){var t=this.props.errors,e=this.state,n=e.content,r=e.title;return o.a.createElement("div",{className:"post"},o.a.createElement("div",{className:"post__form"},o.a.createElement("input",{className:"post__form--title",value:r,onChange:this.onChange,type:"text",placeholder:"New Post Title",name:"title"}),t&&t.title&&o.a.createElement("p",{className:"post__form--invalid"},t.title)),o.a.createElement("div",{className:"post__form"},o.a.createElement("textarea",{className:"post__form--content",value:n,onChange:this.onChange,placeholder:"Share a recipe, experience, or anything else!",name:"content"}),t&&t.content&&o.a.createElement("p",{className:"post__form--invalid"},t.content)),this.props.post&&o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"post__form--btn post__form--btn--update",onClick:this.onSumbit(1)},"Update Post"),o.a.createElement("button",{className:"post__form--btn post__form--btn--delete",onClick:this.onSumbit(2)},"Delete Post"))||o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{className:"post__form--btn post__form--btn--add",onClick:this.onSumbit(0)},"Add Post")))}}])&&l(e.prototype,n),r&&l(e,r),u}(),v={addPost:i.a,updatePost:i.f,deletePost:i.b};d.propTypes={post:u.a.object,addPost:u.a.func.isRequired,updatePost:u.a.func.isRequired,deletePost:u.a.func.isRequired,errors:u.a.object,history:u.a.object},e.a=Object(a.b)(function(t){return{errors:Object(s.a)(t.common.errors)}},v)(Object(p.a)(d))},474:function(t,e,n){"use strict";var r=n(475),c=n(116),u=n(476);function i(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function o(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function a(t,e){var o=function(t){var r;switch(t.arrayFormat){case"index":return function(t,e,n){r=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),r?(void 0===n[t]&&(n[t]={}),n[t][r[1]]=e):n[t]=e};case"bracket":return function(t,e,n){r=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),r?void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=[e]:n[t]=e};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=c({arrayFormat:"none"},e)),a=Object.create(null);return"string"!=typeof t?a:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),n=e.shift(),r=0<e.length?e.join("="):void 0;r=void 0===r?null:u(r),o(u(n),r,a)}),Object.keys(a).sort().reduce(function(t,e){var n=a[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))):a}e.extract=o,e.parse=a,e.stringify=function(r,o){!1===(o=c({encode:!0,strict:!0,arrayFormat:"none"},o)).sort&&(o.sort=function(){});var a=function(r){switch(r.arrayFormat){case"index":return function(t,e,n){return null===e?[i(t,r),"[",n,"]"].join(""):[i(t,r),"[",i(n,r),"]=",i(e,r)].join("")};case"bracket":return function(t,e){return null===e?i(t,r):[i(t,r),"[]=",i(e,r)].join("")};default:return function(t,e){return null===e?i(t,r):[i(t,r),"=",i(e,r)].join("")}}}(o);return r?Object.keys(r).sort(o.sort).map(function(e){var t=r[e];if(void 0===t)return"";if(null===t)return i(e,o);if(Array.isArray(t)){var n=[];return t.slice().forEach(function(t){void 0!==t&&n.push(a(e,t,n.length))}),n.join("&")}return i(e,o)+"="+i(t,o)}).filter(function(t){return 0<t.length}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:a(o(t),e)}}},475:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},476:function(t,e,n){"use strict";var r="%[a-f0-9]{2}",o=new RegExp(r,"gi"),u=new RegExp("("+r+")+","gi");function a(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],a(n),a(r))}function i(e){try{return decodeURIComponent(e)}catch(t){for(var n=e.match(o),r=1;r<n.length;r++)n=(e=a(n,r).join("")).match(o);return e}}t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=u.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=i(n[0]);r!==n[0]&&(e[n[0]]=r)}n=u.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var c=o[a];t=t.replace(new RegExp(c,"g"),e[c])}return t}(e)}}},489:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(2),o=n.n(r),u=n(24),i=n(480),s=n(115),p=n(380),f=n(386);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d,v,g,j=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,y(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,a["Component"]),n=e,(r=[{key:"render",value:function(){var t=this.props,e=t.posts,n=t.canPost,r=t.history;return c.a.createElement("div",{className:"posts"},n&&c.a.createElement(f.a,null),e.map(function(t,e){return c.a.createElement(p.a,{key:e,post:t,onClick:function(){return r.push("/feed/"+t._id)}})}))}}])&&b(n.prototype,r),o&&b(n,o),e}();d=j,v="propTypes",g={posts:o.a.array,canPost:o.a.bool,history:o.a.object},v in d?Object.defineProperty(d,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[v]=g;var _=Object(u.b)(function(t){return{posts:t.feed.posts,canPost:Object(s.b)(t.user,1)&&1===t.feed.page}})(Object(i.a)(j)),O=n(374),P=n(474),w=n.n(P);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(t){function u(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e=this,r=(t=S(u)).call.apply(t,[this].concat(a)),x(N(N(n=!r||"object"!==E(r)&&"function"!=typeof r?N(e):r)),"state",{currentPage:n.props.page}),x(N(N(n)),"changePage",function(e){return function(){var t=n.state.currentPage+e;n.props.history.push({pathname:"/feed",search:"?page="+t}),n.setState({currentPage:t}),n.props.setPage(t)}}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(u,a["Component"]),e=u,r=[{key:"getDerivedStateFromProps",value:function(t){var e=parseInt(w.a.parse(t.history.location.search).page)||1;return 0<e&&t.page!==e?(t.setPage(e),{currentPage:e}):null}}],(n=[{key:"render",value:function(){var t=this.state.currentPage,e=this.props.lastPage;return c.a.createElement("div",{className:"feed__controls"},1<t&&c.a.createElement("button",{className:"feed__controls",onClick:this.changePage(-1)},"←"),1<e&&c.a.createElement("span",{className:"feed__controls--current"},"Page ",t),t<e&&c.a.createElement("button",{className:"feed__controls",onClick:this.changePage(1)},"→"))}}])&&k(e.prototype,n),r&&k(e,r),u}();x(T,"propTypes",{lastPage:o.a.number,page:o.a.number,setPage:o.a.func,history:o.a.object});var R={setPage:function(t){return Object(O.e)(t)}},A=Object(u.b)(function(t){return{page:t.feed.page,lastPage:Math.ceil(t.feed.totalItems/t.feed.itemsPerPage)}},R)(Object(i.a)(T));e.default=function(){return c.a.createElement("div",{className:"feed"},c.a.createElement(_,null),c.a.createElement(A,null))}}}]);
//# sourceMappingURL=1.js.map